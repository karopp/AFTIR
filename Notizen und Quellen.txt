

1. Blockchain
= distributed data structure, that is shared between the nodes of the underlying peer to peer network
- realizes distributed networks without a trusted intermediary
- relies on cryptography instead (every user has a pair of private and public key, private key for signing his transactions and public key to be addressed with in the network
- consensus mechanism PoW, PoS ‚Äî> not needed in private Blockchains 

Christidis, K.; Devetsikiotis, M.(2016): Blockchains and Smart Contracts for the Internet of Things, S. 1-4

Blockchain properties
- distributed consensus mechanism: no need for a central trustworthy party
- values can be stored in the blockchain: crypto currencies 
- all transactions are transparent and irreversible

Prinz, W.; Schulte, A.(2017): Blockchain - Technologien, Forschungsfragen und Anwendungen, S. 4

Blockchain mechanism
- sender creates a transaction (transmission of crypto currencies, registration of a document, etc.) signs it digitally and forwards it to the network
- the nodes in the peer-to-peer network check if the transaction is valid and if this is the case, the transaction is added to a block
- the process of creating new blocks and adding them to the Blockchain is called mining
	Mining (Proof of Work) 
	- every block has a corresponding hash value
	- miners have to find the original string which corresponds to the hash value of 	the new block
	- as hash functions are irreversible, this task can only be solved by trying out
	- when the string is found all other nodes can easily verify the result by simply 	using the hash function
	- the new chain is then distributed to other nodes in the network to create a 		consensus about the network state

Prinz, W.; Schulte, A.(2017): Blockchain - Technologien, Forschungsfragen und Anwendungen, S.6

2. Smart Contracts
- enable automatic and trustworthy modification of information in the Blockchain
- continuous updates of the Smart Contract is not possible, once implemented, it cannot be revised without questioning the integrity of the Blockchain

Prinz, W.; Schulte, A.(2017): Blockchain - Technologien, Forschungsfragen und Anwendungen, S.14

Smart Contracts = scripts, which are stored on the blockchain and embedded into an infrastructure (hardware or software), that can enforce them automatically
- Smart contracts have a unique address, to which a transaction can be sent to trigger the Smart contract and the execution will start immediately 
- a contract has its own account on the blockchain, in which it can hold assets
- smart contracts are deterministic, the same input will always cause the same output 
- all interactions with the contract are signed, therefore the nodes can trace back all operations

Christidis, K.; Devetsikiotis, M.(2016): Blockchains and Smart Contracts for the Internet of Things, S. 1-4

Smart Contracts and the real world
- for the execution of smart contracts, it is critical to feed the Blockchain with the necessary data of the triggering event
- the triggering event must even be computational verifiable
- smart contract performance relies on:
	- availability of necessary data
	- ability to feed such data to the smart contract
- in most applications, it is necessary that the smart contract reacts to events in the physical world
‚Äî> the original blockchain was designed as a closed system for security and efficiency reasons. This isolated system cannot accept any input from the physical world
	- on chain events: events that are visible to the blockchain (passage of time, addition of blocks, transfer of tokens)
	- off chain events: events in the physicals world, blockchain cannot accept direct input from these events

Triggering smart contracts
- complex algorithms generate a public key and a private key, the algorithm also ensures that the private key cannot be derived from the public key
- the public key is used to identify an account to which tokens can be transferred
- scripts will lock the tokens to the public key and without the corresponding private key, the account remains a sealed box
- the unlocking scripts have to sign with the private key
- smart contracts remain these sealed boxes which can only be opened with the right key but are isolated from the physical world
‚Äî> third parties must be included that will sign the unlocking script after verifying that the off chain event has taken place = oracles

Problems
1. oracles can only sign or not sign the contract, there is no room for tendencies
2. necessary to find a reliable oracle and a reliable data source
‚Äî> oracles do not compute the information but retrieve it from external sources like websites, prediction markets or other blockchains
‚Äî> parties of the smart contract have to agree on a used oracle and the data source
‚Äî> rely on a network of oracles and accept information if n of m oracles sign the unlocking script
3. act of obtaining information
- public and universally accessible information (weather, stock prices)
- sensor data may produce divergent information dependent on the placement and the sensitivity of the sensors (one specific source has to be defined to avoid conflicts)
- visible information but difficult to obtain (delivery of a packet) ‚Äî> elaborate physical infrastructure with advanced sensor activity necessary 
- IoT will provide this infrastructure but there is an absence of security and standardization
4. not all off chain events can be expressed in computer-readable data or measured with objective criteria (quality of a designer handbag)

Mik, E. (2017): Smart Contracts: Terminology, Technical Limitations and Real World Complexity


3. Oracles
- type of smart contract which collects data from one or more sources to report it to other blockchains
- oracles are necessary if the smart contract refers to an off-blockchain event 
- the oracle monitors and verifies the blockchain event 

Kiviat, T.(2015):‚ÄûSmart‚Äú Contract Markets: Trading derivatives contracts on the blockchain

Codius
- smart contract are strictly deterministic, in order to communicate with the real word, they relay on cryptographic signatures provided by oracles 
- oracles = trusted entities that sign claims about the state of the real world —> verification of the signatures is a deterministic process which allows the deterministic smart contracts to interact with the non-deterministic outside world 
- challenge: design a system that can run powerful smart contracts and has a robust consensus mechanism (very difficult to obtain)
—> consensus networks must be conservative about their feature set to avoid complex structures that could lead to bugs because that will cause forks in the chain
—> since consensus is required, the technology is relatively difficult to update or modify 
Codius approach: code execution is decoupled from consensus databases or other asset transfer services 
- the execution network and the consensus network interact through cryptographic signatures 
- this decoupling allows the smart contract to interact with multiple networks and services at once (Bitcoin and Ripple, web- based services like PayPal, Google, Ebay, etc. or even other Internet protocols, such as SSH, LDAP, SMTP and XMPP.

1. traditional approach: independent entities inform the contract about the state of the outside world by introducing signatures to the network when specific conditions are met

2. Smart Oracles: entities that can both, providing information and executing the contract 
- smart oracles expose specific APIs to the contracts they run (Internet, filesystem, randomness, time)

Codius Whitepaper: https://github.com/codius/codius/wiki/Smart-Oracles:-A-Simple,-Powerful-Approach-to-Smart-Contracts

- the only possibility to get data into the Blockchain, is to address it with transactions 
- if any third party is included, which provides the data, this party has to be trustworthy which contradicts the fundaments of the blockchain architecture (to avoid central intermediaries)
- from a technical point of view, an oracle is simply an player who can feed transactions into the blockchain
- the events in the physical world are coded in these transactions to inform the blockchain about it

Solutions:
1. Distributed Oracles: the blockchain does not have to trust one oracle but uses a network of oracles and trusts the decision of the majority
- there is no single point of failure in distributed oracles (manipulation is also harder)
- it is more difficult to create a consensus with distributed oracles 
- Ex: Orisi

—> Augur and Truthcoin with the greatest market cap ($35 million), reputation based system is used:
- users are rewarded for correct answers and penalized otherwise 
- Augur runs on Ethereum and Truthcoin is implemented as a sedition within bitcoin 
—> Augur is vulnerable to parasite contracts
- when information is validated, it is public —> other contracts can report the information from the oracle to receive the fee, so it becomes unprofitable for the oracle to operate. 

Abhiram Kothapalli, Christopher Cordi: A Bribery Framework using SmartContracts

2. Reality Keys: Mixture of automated oracles and human intervention
- in normal and easy cases, it works like a normal oracle and fetches the information from APIs and other open sources
- if there is any doubt in the network, a human can double check it 
- fallback mechanism in the smart contract is necessary if one party doubts the result of the oracle and a human must check it, no guarantee for the correct result even after human intervention 
3. Oraclize: uses TLSNotary to ensure reliability
- TLSNotary ensures that a certain server has sent certain data at a certain time (no manipulation) with a TLS connection
- not 100% secure because the system could be hacked 

Chain Interoperability
- one blockchain for all applications is not realistic because different types of application need differently designed blockchains
- chains have to interoperate —> the platforms already use cryptographic authentication and can therefore provide a more secure coupling than other systems
Strategies for chain interoperation:

1. Centralized or multisig notary schemes = a trusted entity claims to chain X that an event occurred on chain Y (Interledger project, byzantine fault consensus mechanism)

2. Sidechains/relays: We can create a contract on chain B that takes one of these block headers of chain A, and uses the standard verification procedure for chain A's consensus algorithm to verify this block header. Once the relay has verified that the block header has been finalized, the relay can then verify any desired transaction, or account/state entry, separately by verifying a single branch of the Merkle tree against the block header. (light client verification)

3. Hash-locking: not useful for cross-chain oracles because accessing a cross-chain oracle is a passive operation for the chain, whereas hash-locking is an active operation on both sides.

—> chain interoperability can achieve cross-chain oracles: smart contract on one chain that performs some action with some address only when it receives proof that an identity oracle on another chain specifies that the address is a particular unique identity

Vitalik Buterin(2016): Chain Interoperability

4. Technical Implementation
Ethereum: Platform for decentralized applications with a turing complete programming language
- in contrast to Bitcoin platform, it is possible to inject executable code in the platform with transactions 
- if the code is activated by a second transaction, every node can execute it in the Ethereal Virtual Machine 
- Ethereal has its own currency called Ether, which means that financial applications can also be realized in Ethereum

Components of Ethereum
- MIST Browser: graphical user interface for using the dapps and a wallet for managing Ether entities
- EVM: distributed virtual machine, which runs on every node in the network, is used to execute Smart contracts and to manage the stored values (their condition can be changed by the programming language), if a function of a smart contract is used in the EVM all nodes in the network execute it
- Clients: to interact with the network e.g. geth which uses Javascript API Web3
- Swarm: distributed file system to store data
- Whisper: internal communcation protocol to exchange information between smart contracts or dapps

Spancken, M.; Hellenkamp M., Brown C.(2016): Kryptow√§hrungen und Smart Contracts 

5. Programming Smart Contracts
- Solidity as programming language
- structure of a smart contract is like a class with state variables, modifiers, events, structures and enums 
- support inheritance
- variables can be stored in memory or in the filesystem
Example: 
contract Sample 
{ 
    //state variables 
    uint256 data; 
    address owner; 

    //event definition 
    event logData(uint256 dataToLog);  

    //function modifier 
    modifier onlyOwner() { 
        if (msg.sender != owner) throw; 
        _; 
    } 

    //constructor 
    function Sample(uint256 initData, address initOwner){ 
        data = initData; 
        owner = initOwner; 
    } 

    //functions 
    function getData() returns (uint256 returnedData){ 
        return data; 
    } 

    function setData(uint256 newData) onlyOwner{ 
        logData(newData); 
        data = newData; 
    } 
} 

Programming Languages 
Solidity, Serpent, LLL, Viper
‚Äî> Smart Contracts have to run in the same way on every node, they have to run in sufficiently large sandboxes to prevent manipulation, conventional languages do not have sandboxes which are large enough and they suffer from variations in behavior, so they present too much attack surface for malicious code 
- Solidity
- Serpent / Viper
- LLL
- JavaScript
- Bitcoin Scripting Language 
- Node.Js

1. Solidity
- most developed language and compiler 
- data types: bool, int, array, string, structs, enums, mapping (hash table), address
- contract oriented and syntax similar to JavaScript 
- statically typed, supports inheritance, libraries, complex user-defined types
2. Serpent / Viper
- Serpent is a low level language and therefore not recommended but Viper is the successor to Serpent 
- data types: integer, real, string, symbol, file, array, dictionary, object, class, frame, method 
https://www.cs.cmu.edu/~music/serpent/doc/serpent.htm
3. LLL (Lisp Like Language)
- low level language, similar to assembler = wrapper over coding the EVM directly 
- consists of expressions to be evaluated not executable instructions, expressions can be integers, strings, atom, operator (EVM opcode)
https://media.readthedocs.org/pdf/lll-docs/latest/lll-docs.pdf
4. JavaScript
- data types: string, number, boolean, array, object (dynamic data types in JS)
- JavaScript function is a block of JS code, that can be executed when it is called (calling by occurring events)
5. Bitcoin Scripting Language („Script“)
- designed purposely so that is execution is guaranteed to be terminated
- scripts contain a sequence of instructions that is executed linearly (no jumps backwards)
- length of script and number of opcodes is limited (fewer than 200 opcodes) 
- not turing complete (no loops or recursion)
6. Ethereal byte code 
- executed in EVM with fixed word size of 32 bits and untyped
- single stack and additional storage: temporary storage (memory), permanent storage (key value dictionary)
- special contract operations (creation, call, suicide)

Seijas (2017) Scripting smart contracts for distributed ledger technology

Smart Contract Building Platforms
- Ethereum
- Bitcoin
- Counterparty
- Stellar
- Monax
- Lisk: uses Javascript
- TEZOS: new platform, different from Bitcoin and Ethererum 
- NEO
- Achain

Detailed Information:

1. Ethereum:
= blockchain with built in turing complete programming language which provides an environment for developing smart contracts and decentralized applications by defining new rules of ownership, tranaction formats and state transition functions. 

Smart Contracts = encrypted boxes with a contained value. As long as the predefined conditions are not fulfilled, the box is locked. 

Ethereum Accounts
- State is made out of Account objects, these have a 20 byte address and state transitions are realized by transferring value
- Acoount fields: Nonce (counter to ensure transaction are only processed once), ether balance, contract code, storage
- two types of accounts (externally owned accounts controlled by private keys, contract accounts controlled by their code)
- externally owned accounts send messages by creating and signing a transaction
- when contract account receives a message, its code activates and read or write storage or send other messages
- messages can be created externally or by a contract, the receiver can return a response
- transaction is the signed data package that stores the message, they contain: signature of sender, receiver, amount of data, startgas and gasprice
- startgas is the limit for the computational steps of the code execution
- gasprice is the fee to pay to the miner per computational step

Ethereum Whitepaper

- has its own public blockchain
- smart contracts are written in a stack based byte code language, which is Turing complete but there are also high level languages (Serpent, Solidity, LLL) which compile into byte code language 

2. Bitcoin: 
- bitcoin protocol can be used to create smart contracts 
- easy implementation because no security and privacy risks like on more complex platforms (Ethereum)
- smart contract functionality is not as programmable and extensible like Ethereum 
- non Turing-complete scripting language which is limited to arithmetic, logical and crypto operation 
- only a small fraction of nodes is able to process transaction with complex scripts 

3. Counterparty
- platform without own blockchain, embeds the data in bitcoin transactions
the data is ignored by bitcoin nodes but the nodes of counterparty can interpret them 
- written in same language as Ethereum but no consensus mechanism 
- no transaction fees but the destroyed and the nodes are rewarded by the inflation (proof of burn)

4. Stellar 
- public blockchain with its own currency 
- no specific language for smart contracts, complex contracts are created with transaction chaining and multi signature accounts 

5. Monax
- supports the Execution of Ethereum contracts without having an own currency 
- allows to create private blokchchains 

6. Lisk
- own currency and a public blockchain 
- Smart contracts can be written in JavaScript or in Node.js
- the determinism must be ensured by the programmers (not using math.random)
- contract owners can customize the blockchain by choosing which nodes participate in the consensus 

An empirical analysis of smart contracts - platforms, applications, and design patterns

7. TEZOS
- programming language is Michelson
- stack based scripting language, includes high level primitives, statically typed 

8. NEO
- NEO contract supports almost every high level language ‚Äî> compiler ensures that that the virtual machine can execute the code 
- C#, Java, VB.Net, C, C++, Python, Javascript 

9. Achain
- Programming language is Glua 

10. NXT: built in Smart Contract templates, customized Smart Contracts are not possible due to the lack of Turing-completeness in its scripting language, API for JS
- programmability provided by a high level API (JavaScript), the core software does not support any form of scripting language 
- programming by putting together API calls 

Alharby (2017) A systematic mapping study on current research topics in Smart Contracts


Prusty, N.(2017): Building Blockchain Projects

6. Town Crier
- authenticated data feed for blockchains
- uses Intel‚Äôs SGX (Software Guard Extension): executes processes in an isolated enclave, which cannot be manipulated by other programs, not even by the operating system
- TC uses a smart contract front end which communicated with the requesting smart contract
- normal requests are visible on the blockchain, but TC supports private requests with encryption

7. Blockchain Router
- normal blockchain networks (Ethereum or Bitcoin) are called sub-chains, they can communicate with blockchain routers but not directly with other sub-chains 
- blockchain routers are used for a cross chain communication with a cross chain communication protocol
- blockchain routers contain: validators, nominators, surveillants, connectors
- consensus is reached by voting 




Notes Nina:


1. Smart Contract
Smart contract = executable code running on top of a blockchain
=  collection of computer protocols that facilitate, verify, or enforce the negotiation or performance of a contract by executing the terms of a contract  automatically
- Smart contracts can control digital assets like money or stocks stored on a blockchain. The input data has to be stored in the blockchain and the execution results will be stored in the blockchain again
- reducing transaction costs, superior to paper based contracts because they are executable automatically
- was proposed by Nick Szabo on digital contracts and digital currency 

Yu, L., Tsai, W. T., Li, G., Yao, Y., Hu, C., & Deng, E. (2017). Smart-Contract Execution with Concurrent Block Building

Smart contract = self executing sripts stored on a blockchain 
- integrate the concepts of blockchains (-> distributed, automated workflows)
- have a unique address
- send transaction to this address to trigger the smart contract -> independent and automatic execution
- a smart contract is deterministic (same input => same output)
- interactions are signed messages on the blockchain
- A properly written smart contract should describe all possible outcomes of the contract

Christidis, K., & Devetsikiotis, M. (2016). Blockchains and smart contracts for the internet of things


Examples Smart Contract
- platforms where end users can build their own self-executing contract (e.g. on the Bitcoin blockchain network) ("There are platforms that allow end users to build selfexecuting contracts on the Bitcoin blockchain network, for example, smartcontract" "However, smart contracts on the Bitcoin blockchain network are very simple due to the limited expressiveness of the corresponding scripting language, which does not support complex control flow.")

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector.

- Management of Intellectual Property Rights: watch legal deadlines, pay fees on time, watch formal requirements -> smart contracts can replace specialized lawyers as intermediates between applicant and the patent office
- the regulations of the Patent Act can be implemented as if-then statements

Meitinger, T. H. (2017). Smart Contracts.


Accord Project: launched smart contract 
by Clause, a legal tech start-up pioneering data-driven contracts and ëSoftware-as-a-Serviceí product transitioning contracts from static documents into real-time, integrated, components of commercial systems
users can draft and host a wide array of contracts integrated with data, and monitor their state in real-time
open source software
Hyperledger
uses external data to drive the contract's execution
first consortium driven by the legal industry
https://clause.io/; https://www.forbes.com/sites/rogeraitken/2017/07/26/accord-projects-consortium-launching-first-legal-smart-contracts-with-hyperledger/#2ef05323472c

possible applications: smart vehicle insurance (adaption of the insurance sum to the driving style), marshall tasks (if a person does not pay the rate for the car, it is locked automatically), pay with Ethereum at a charging station for electric cars



2. Blockchain
= distributed data structure shared by members of the network
Characteristics
- no trusted intermediary
- decentralized network without central authority needed
- blockchain enables trustless networks (transactions without trusting each other)
- key characteristic: cryptography
Chain
- blocks identified by cryptographic hash
- reference to the block before (hash) creates the link between the blocks (->chain)

Blockchain network
= nodes operating on the same blockchain (each node has a copy); peer-to-peer network
- pair of private/public keys: private key to sign own transaction, address node in the network with public key -> use of asymmetric cryptography allows authentication, integrity, and non- repudiation
- nodes who receive a transaction check if this transaction is valid; collected and validated transactions (during certain arranged time) are packed into a block (mining); the nodes of the network check if the block has a valid transaction and if they refer to the correct previous block via the hash
- shared blockchain: authenticated and timestamped record of the actions in the network

Consensus Mechanism
- distributed consensus mechanism to agree on transactions and order of blocks
- proof-of-work, proof-of-stake
- not needed in private networks

Christidis, K., & Devetsikiotis, M. (2016). Blockchains and smart contracts for the internet of things

- blockchains decentralize the way we store data and manage information, removing central intermediators
- different chains cannot communicate and has no mutual trust at all (network capacity similar to LAN)
- consensus mechanism  provides security (also limits the development of blockchain system)

Wang, H., Cen, Y., & Li, X. (2017). Blockchain Router: A Cross-Chain Communication Protocol.

- digital assets like money or stocks can be stored on a blockchain
- Permissioned blockchains: Only nodes with permission can verify and vote in the block creation process
- Permissionless blockchains: Every can verify and vote

Yu, L., Tsai, W. T., Li, G., Yao, Y., Hu, C., & Deng, E. (2017). Smart-Contract Execution with Concurrent Block Building.

- the first generation of blockchain did not support
programmable transactions much (public ledger for monetary transactions, typical application: cryptocurrency)
-the second generation: generally programmable infrastructure. Smart contracts were introduced

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector. 


3. Platforms for Smart Contracts

12 platforms: Bitcoin, Codius, Counterparty, DAML, Dogeparty, Ethereum, Lisk, Monax, Rootstock, Symbiont, Stellar, and Tezos.
- with the criteria: launched, running and supported by community of developers and public acces -> Bitcoin, Ethereum,
Counterparty, Stellar, Monax and Lisk
- analysis of platforms: own blockchain, consensus protocol, blockchain public or private, languages used to write smart contracts

Bitcoin:
=platform to transfer the digital currency bitcoins
-first decentralized cryptocurrency
-now largest market capitalization
-platform is based on a public blockchain to record all transcations
-consensus mechanism based on "proof-of-work"
- main goal of the platform is to transfer cryptocurrency
- but the immutability and openness of its blockchain led to the developing protocols to implement smart contracts, too
- non-Turing complete scripting language with basic arithmetic, logical, and crypto operations (quite limited)
- further limitation: only a few nodes of the Bitcoin network are able to do transactions more complicated than verifying a signature

Counterparty:
-without own blockchain
-embeds its data into Bitcoin transactions.
-the nodes of the Bitcoin network ignore this embedded data, the nodes of Counterparty recognise and interpret them
-smart contracts in same languages like Ethereum
-no consensus protocol to validate results of computations
-own currency (transfer between users, spend to execute contracts
-proof-of-burn: no fees for executing contracts but the paid fees are destroyed and the nodes are indirectly rewarded by the inflation of the currency

Stellar:
-public blockchian with own cryptocurrency
-consensus algorithm: node agrees on a transaction if the nodes in its neighbourhood also agree
- in comparison to proof-of-work, this protocol uses less computing power,no solving of cryptographic puzzles
-no specific language for smart contracts, but it still can be used to implement basic smart contracts
- also other transactions than payment (could be implemented on Bitcoin platform as well): creating an account
- special accounts called multisignature for more than one owner (for operating threshold of consensus of the owners is needed)

Monax
-execution of Ethereum contracts without the currency ether
-users can create private blockchains and the authorization policies for access
-consensus protocol: in rounds; one node proposes a new block of transactions, the others vote for it, it is approved with 2/3 of the votes; if a proposed block is rejected the next round starts and another participant proposes the next block

Lisk:
-own currency and a public blockchain
-consensus mechanism: delegated proof-of-stake
-101 active delegates, each one elected by the stakeholders, have the authority to generate blocks.
-execution of Turing-complete smart contracts, written either in JavaScript or in Node.js.
-determinism of executions is not ensured by the language: rather, programmers must take care of it,
-has a main blockchain, and each smart contract is executed on a seperate blockchain
-Users can deposit or withdraw currency from a contract to the main chain
-contract owners can customize their blockchain (eg which nodes participate the consensus mechanism)

+ in this paper also is a little table comparing these 6 platforms


Bartoletti, M., Pompianu, L. (2017). An empirical analysis of smart contracts: platforms, applications, and design patterns.

-Nxt

D. McAdams, P. L. Seijas, and S. Thompson (2017). Scripting smart contracts for distributed ledger technology.

3.1 Ethereum https://www.ethereum.org/
http://www.ethdocs.org/en/latest/ (documentation of the Ethereum community)
+White Paper

- the second platform for market capitalization, after Bitcoin.
-relies on a public blockchain, consensus algorithm similar to that of Bitcoin
- own currency, denoted ETH.
- Smart contracts are written in a stack-based bytecode Turing-complete language or in high-level languages like Solidity (the most popular high-level language) which compile into the bytecode language.
- users create contracts, send transactions to the blockchain; the network validates the effects
- users and contracts can store and send/receive money (ether)

Bartoletti, M., Pompianu, L. (2017). An empirical analysis of smart contracts: platforms, applications, and design patterns.



- Ethereum is the most popular platform for smart contracts, Lisk is an alternative (also a platform for smart contracts based on the blockchain technology; in Lisk smart contracts can be written in JavaScript)

Meitinger, T. H. (2017). Smart Contracts.


= a blockchain-based platform
- smart contracts = their first class element
- Ethereum built its own blockchain
- this blockchain has a (Turing-complete) script language to write smart contracts

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector. 


- A public blockchain
- In Ethereum, there are two types of entities that can generate and receive transactions: people and contracts.
- A contract is essentially an automated agent that lives on the Ethereum blockchain, has an address and a balance and can send and receive transactions, programmability and execution are priority items.

Smart Contracts in Ethereum (+Structure)
- Smart contracts in Ethereum: code (its functions) and data (its states); on specific addresses on the blockchain
- Smart contracts are written in high-level languages such as Solidity, Serpent, and LLL, and then compiled into bytecode to be uploaded on the blockchain
- Contracts on the blockchain in binary format called Ethereum Virtual Machine (EVM)

Yu, L., Tsai, W. T., Li, G., Yao, Y., Hu, C., & Deng, E. (2017). Smart-Contract Execution with Concurrent Block Building.


- the EVM = runtime environment for smart contracts in Ethereum
- the EVM is not connected to network, filesystem, other processes
- smart contracts have limited access to other smart contracts

English, M., Auer, S., & Domingue, J. (2016, May). Block chain technologies & the semantic web: A framework for symbiotic development.


- The bytecode consists of a series of bytes representing operations
- There is an index pointer which increases by one with every operation; the operation associated with the current index pointer is executed
- Each operation requires a fee and the balance on the account will be reduced
- a node can send a transaction to a Ethereum smart contract, then the contract executes its code 

- Each node of Ethereum processes every transaction on its list and changes its state until a block is built successfully. Then write state in block header; send block
- When a node receives a block it processes the transactions in the block and calculates new state. If the state matched the state in the block header the block will be accepted.

Yu, L., Tsai, W. T., Li, G., Yao, Y., Hu, C., & Deng, E. (2017). Smart-Contract Execution with Concurrent Block Building.


- transactions are data packages storing monetary value, code, parameters of functions, results of functions
- integrity of the transactions: cryptographic techniques

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector.

- Ethereum is the most popular platform for smart contracts on the basis of blockchain
- in Ethereum accounts can be created; these accounts manage the virtual currency Ether and the smart contracts
- the virtual currency Ether is needed to pay for the execution of smart contracts
- smart contracts are written in low-level languages or in high-level languages to increase the readability (at the beginning Serpent, now Solidity)
-regulations (of for example a law) can be implemented as if-then statements
- a set of one after another events can be implemented as a sequence of a blockchain in the smart contract

Meitinger, T. H. (2017). Smart Contracts.

4. Programming

Example Code Smart Contract on Industry 4.0 Platform

contract mortal {
 /* Define variable owner of the type address */
 address owner;
 /* this function is executed at initialization and sets the owner of the contract */
 function mortal () owner = msg.sender;
 /* Function to recover the funds on the contract */
 function kill () if (msg.sender == owner) suicide(owner);
 }

 contract accountManager is mortal {
 /* data structure to hold accounts */
 struct Account {
 string uri;
 bytes32 hash;
 }

 /* mapping of accounts to data */
 mapping (address => Account) accounts;
 function setAccount (string uri, bytes32 hash) returns (bool)
 return setAccount (msg.sender, uri, hash);
 function setAccount (address account, string uri, bytes32 hash) returns (bool) {
 bool rv = msg.sender == owner || msg.sender == account;
 if (rv) accounts [account] = Account (uri, hash);
 return rv;
 }
 function readAccountUri (address account) constant returns (string)
 return accounts [account].uri;
 function readAccountHash (address account) constant returns (bytes32)
 return accounts [account].hash;
 }

- mortal super-class: initialization and finalization of the smart contract
- contract accountManager: array indexed by accounts: uri for product type, hash for concrete product
- public key authentication of Ethereum: only a certified account owner can update information

English, M., Auer, S., & Domingue, J. (2016, May). Block chain technologies & the semantic web: A framework for symbiotic development.


5. Problems Blockchain/Smart Contract
- closed execution environment
- no import of external states by polling external servers

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector.

- verification of external data
- (division and delivery of physical assets)
-> development of smart oracle to verify external data

Eze, P., Eziokwu, T., & Okpara, C. (2017). A Triplicate Smart Contract Model using Blockchain Technology.


on-chain: within the blockchain network
off-chain: outside the blockchain system (e.g. on a third party server)


Idelberger, F., Governatori, G., Riveret, R., & Sartor, G. (2016). Evaluation of logic-based smart contracts for blockchain systems.



6. Oracles
- routers connecting a set of application programming interfaces
- smart contract collects data from software interfaces or other sources
- provide data (collect data from one source and send it to another node)

Lauslahti, K., Mattila, J., & Sepp√§l√§, T. (2017). Smart contracts‚Äìhow will blockchain technology affect contractual practices

Validation oracle
- because the blockchain has a closed execution environment and it is not allowed to import external data
- to evaluate conditions which is not possible in the blockchain itself
- using external state
- may be independent of the blockchain network, can be implemented as a server outside the network
- validation of a transaction relies on external data, the validation oracle can validate and sign the transaction
Example
-Orisi: pre-defined set of oracles to run and their signatures needed to sign a contract

Xu, X., Pautasso, C., Zhu, L., Gramoli, V., Ponomarev, A., Tran, A. B., & Chen, S. (2016). The blockchain as a software connector.

Orisi White Paper:
-oracle = an arbiter interacting with the outside world and deciding whether a set of conditions took place or not.
-issue: trust required from the oracle (can be hacked, its process is intransparent, the oracle may disappear before finishing the transaction, the oracle may be bribed to deliver faulty results)
-Orisi's approach is to create a distributed set of oracles run by independent and trustworthy parties instead of one single-server-oracle
-The majority of them need to agree on the outcome for the transaction to be finalized
-The oracles check the validity of the transaction and rules
-The oracles may have information from websites, then they add their signature to a transaction


https://github.com/orisi/wiki/wiki/Orisi-White-Paper "Orisi White Paper" 2014



- input example for a smart oracle: data from a GPS tracking system
- every smart oracle is as smart as its information source

Problems oracles
- authenticity and integrity of the data used by smart oracles 

Eze, P., Eziokwu, T., & Okpara, C. (2017). A Triplicate Smart Contract Model using Blockchain Technology.

-contracts may need to acquire data from outside the blockchain, e.g. from a website
-The Ethereum language does not allow contracts to query external sites
-Oracles are the interface between contracts and the outside
-Technically, they are just contracts, and as such their state can be updated by sending them transactions
-in practice: a contract queries an oracle
-one of the most common: Oraclize

Bartoletti, M., Pompianu, L. (2017). An empirical analysis of smart contracts: platforms, applications, and design patterns.


-smart contracts that reference off-blockchain events must be able to monitor real world conditions
-Oracles are systems set up to monitor off-blockchain information and data that is essential to the effective execution of the smart contractís terms.


Kiviat, T.(2015): Smart Contract Markets: Trading derivatives contracts on the blockchain.




